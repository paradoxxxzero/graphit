(function(){"use strict";const u={linear:"x","linear-horizontal":"y",polar:"o",parametric:"t"};for(let n of Array.from(Object.getOwnPropertyNames(Math)))self[n.toLowerCase()]=self[n]=Math[n];self.TAU=self.PI*2,self.osc=(n,r,o="sine")=>r<0?0:o==="sine"?Math.sin(2*Math.PI*n*r):o==="square"?Math.sign(Math.sin(2*Math.PI*n*r)):o==="sawtooth"?2*(r*n-~~(r*n+.5)):o==="triangle"?2*Math.abs(2*(r*n+.25-~~(r*n+.75)))-1:0,self.adsr=(n,r=.2,o=.1,t=.4,f=.3,l=.5)=>n<0?0:n<=r?n/r:n<=r+o?1-(1-l)*(n-r)/o:n<=r+o+t?l:n<=r+o+t+f?l-(l-0)*(n-r-o-t)/f:0,self.__doc__={[self.adsr]:"adsr usage: (x, attack = 0.2, decay = 0.1, sustain = 0.4, release = 0.3, sustainLevel = 0.5)",[self.osc]:"osc usage: (freq, x, type = sine|square|sawtooth|triangle)",[self.abs]:"Returns the absolute value of x.",[self.acos]:"Returns the arccosine of x.",[self.acosh]:"Returns the hyperbolic arccosine of x.",[self.asin]:"Returns the arcsine of x.",[self.asinh]:"Returns the hyperbolic arcsine of a number.",[self.atan]:"Returns the arctangent of x.",[self.atanh]:"Returns the hyperbolic arctangent of x.",[self.atan2]:"Returns the arctangent of the quotient of its arguments.",[self.cbrt]:"Returns the cube root of x.",[self.ceil]:"Returns the smallest integer greater than or equal to x.",[self.clz32]:"Returns the number of leading zero bits of the 32-bit integer x.",[self.cos]:"Returns the cosine of x.",[self.cosh]:"Returns the hyperbolic cosine of x.",[self.exp]:"Returns ex, where x is the argument, and e is Euler's constant (2.718\u2026, the base of the natural logarithm).",[self.expm1]:"Returns subtracting 1 from exp(x).",[self.floor]:"Returns the largest integer less than or equal to x.",[self.fround]:"Returns the nearest single precision float representation of x.",[self.hypot]:"Returns the square root of the sum of squares of its arguments.",[self.imul]:"Returns the result of the 32-bit integer multiplication of x and y.",[self.log]:"Returns the natural logarithm (\u33D2e; also, \u33D1) of x.",[self.log1p]:"Returns the natural logarithm (\u33D2e; also \u33D1) of 1 + x for the number x.",[self.log10]:"Returns the base-10 logarithm of x.",[self.log2]:"Returns the base-2 logarithm of x.",[self.max]:"Returns the largest of zero or more numbers.",[self.min]:"Returns the smallest of zero or more numbers.",[self.pow]:"Returns base x to the exponent power y (that is, xy).",[self.random]:"Returns a pseudo-random number between 0 and 1.",[self.round]:"Returns the value of the number x rounded to the nearest integer.",[self.sign]:"Returns the sign of the x, indicating whether x is positive, negative, or zero.",[self.sin]:"Returns the sine of x.",[self.sinh]:"Returns the hyperbolic sine of x.",[self.sqrt]:"Returns the positive square root of x.",[self.tan]:"Returns the tangent of x.",[self.tanh]:"Returns the hyperbolic tangent of x.",[self.trunc]:"Returns the integer portion of x, removing any fractional digits."};const a={};onmessage=({data:{index:n,funs:r,type:o,values:t,affects:f,dimensions:l=2,uuid:c}})=>{let h="",g=[0];try{for(let e=0;e<f.length;e++){const[s,m]=f[e],R=new Function("","return "+m)();a[s]=self[s],self[s]=R}const i=r.map(e=>new Function(u[o],"return "+e));for(let e=0;e<t.length;e+=l)if(l===1){if(t[e]=i[0](t[e]),typeof t[e]!="number"){let s;throw typeof t[e]=="function"?s=new Error(self.__doc__[t[e]]||"Function not supported"):typeof t[e]>"u"?s=new Error(`${r[0]} is undefined`):s=new Error(`${typeof t[e]} is not a number`),t[e]=null,s}}else if(o==="parametric"){const s=t[e];t[e]=i[0](s),t[e+1]=i[1](s)}else if(o==="linear-horizontal")t[e]=i[0](t[e+1]);else if(t[e+1]=i[0](t[e]),o==="polar"){const s=t[e];t[e]=t[e+1]*Math.cos(s),t[e+1]*=Math.sin(s)}for(let e=0;e<f.length;e++){const[s]=f[e];self[s]=a[s],delete a[s]}}catch(i){h=i}postMessage({index:n,values:t,type:o,skips:g,err:h,uuid:c})}})();
